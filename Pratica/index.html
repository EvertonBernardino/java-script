<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora</title>
    <style>
        @font-face {
        font-family: 'Digital';
        src: url(fonte/DS-DIGI.TTF) format('opentype');
        }
        *{
            margin: 0px;
            padding: 0px;
            font-family: Arial, Helvetica, sans-serif;
            font-size: 20pt;
        }
        body{
            background-color: darkgrey;
            padding: 30px;
        }
        #visor{
            font-family: 'Digital', Arial, sans-serif;
            height: 60px;
            width: 190px;
            margin-bottom: 10px;
            padding: 2px;
            box-shadow: inset 2px 2px 0px rgba(0, 0, 0, 0.281);
            background-color: rgb(115, 179, 6);
            color: rgb(0, 70, 6);
        }
        #res{
            margin-bottom: 5px;
            padding: 2px;
            background-color: rgb(50, 102, 69);
            color: white;
            width: 100px;
        }
        div#calculadora{
            background-color: aquamarine;
            margin: auto;
            padding: 20px;
            width: 200px;
            border-radius: 20px;
            box-shadow: 5px 5px 1px rgba(0, 0, 0, 0.479);
        }
        div#botoes{
            width: 200px;
            margin: auto;
            
        }
        div#botoes > button{
            margin: 2px;
            width: 40px;
            height: 40px;
            background-color: rgb(59, 105, 88);
            color: rgb(255, 255, 255);
        }
    </style>
</head>
<body>
    <div id="calculadora">
        <input type="button" value="RESET" id="res">
        <div id="visor"></div>
        <div id="botoes" >
            <button id="tecla1"> 1</button> 
            <button id="tecla2">2</button>
            <button id="tecla3">3</button>
            <button id="operadorividir">/</button>
            
                
            <button id="tecla4">4</button>
            <button id="tecla5">5</button>
            <button id="tecla6">6</button>
            <button id="operadorveses">*</button>

            <button id="tecla7">7</button>
            <button id="tecla8">8</button>
            <button id="tecla9">9</button>
            <button id="operador-menos">-</button>

            <button id="teclavirgula">,</button>
            <button id="tecla0">0</button>           
            <button id="igual">=</button> 
            <button id="operadormais">+</button>

                     
        </div>
    </div> 
    <script>
           const visor = document.getElementById("visor")
           const numeros = document.querySelectorAll('[id*=tecla]')
           const operadores = document.querySelectorAll('[id*=operador]')

           let novoNumero = true
           let operador
           let numeroAnterior

           const operacaoPendente = () => operador != undefined

           const ativarIgual = ()=>{
               calcular()
               operador = undefined
           }

           const calcular = () =>{
               if(operacaoPendente()){
                   const numeroAtual = parseFloat (visor.textContent)
                   novoNumero = true
                   const resultado = eval (`${numeroAnterior}${operador}${numeroAtual}`);
                   atualizarVisor(resultado);
               }
           }
         

           const atualizarVisor = (text) =>{
               if (novoNumero){
                    visor.textContent = text
                    novoNumero = false
                }else{
                    visor.textContent += text
                }
            }
           

           const inserirNumero = (evento) => atualizarVisor(evento.target.textContent)

           numeros.forEach( numero => numero.addEventListener('click',inserirNumero))

           const selecionarOperador = (evento) =>  {
            if(!novoNumero) {
                calcular()
                novoNumero = true
                operador = evento.target.textContent
                numeroAnterior = parseFloat (visor.textContent)
           }
        }
           operadores.forEach( operador => operador.addEventListener('click',selecionarOperador))
           
           document.getElementById("igual").addEventListener('click', ativarIgual)
    </script>
</body>
</html>
